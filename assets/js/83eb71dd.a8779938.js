"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3693],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var r=t(96540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}},90045:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"writing-integrations/secrets","title":"Secrets","description":"Learn how to securely manage API keys, credentials, and secrets in ToolJump integrations using environment variables and secure storage patterns.","source":"@site/docs/writing-integrations/secrets.md","sourceDirName":"writing-integrations","slug":"/writing-integrations/secrets","permalink":"/docs/writing-integrations/secrets","draft":false,"unlisted":false,"editUrl":"https://github.com/tooljump/tooljump/tree/main/docs/docs/writing-integrations/secrets.md","tags":[],"version":"current","frontMatter":{"id":"secrets","title":"Secrets","sidebar_label":"Secrets","keywords":["secrets management","api keys","credentials","secure storage","tooljump secrets"],"description":"Learn how to securely manage API keys, credentials, and secrets in ToolJump integrations using environment variables and secure storage patterns."},"sidebar":"docsSidebar","previous":{"title":"Caching","permalink":"/docs/writing-integrations/caching"},"next":{"title":"Data","permalink":"/docs/writing-integrations/data"}}');var s=t(74848),i=t(28453);const o={id:"secrets",title:"Secrets",sidebar_label:"Secrets",keywords:["secrets management","api keys","credentials","secure storage","tooljump secrets"],description:"Learn how to securely manage API keys, credentials, and secrets in ToolJump integrations using environment variables and secure storage patterns."},c="Secrets",a={},d=[{value:"Storing secrets",id:"storing-secrets",level:2},{value:"Declaring Required Secrets",id:"declaring-required-secrets",level:2},{value:"Accessing Secrets in Your Integration",id:"accessing-secrets-in-your-integration",level:2},{value:"Secret Security Best Practices",id:"secret-security-best-practices",level:2},{value:"1. Never Log Secrets",id:"1-never-log-secrets",level:3},{value:"Secret Rotation",id:"secret-rotation",level:3},{value:"Next Steps",id:"next-steps",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"secrets",children:"Secrets"})}),"\n",(0,s.jsx)(n.p,{children:"Secrets allow you to securely store sensitive configuration like API keys, tokens, and credentials that your integrations need to function."}),"\n",(0,s.jsx)(n.p,{children:"A few examples: GitHub tokens, AWS access keys, passwords, connection strings, etc."}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["For how ToolJump manages secrets, see ",(0,s.jsx)(n.a,{href:"/docs/server-architecture#manages-secrets-required-for-connecting-to-external-tools-from-integrations",children:"Server Architecture: secrets"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"storing-secrets",children:"Storing secrets"}),"\n",(0,s.jsx)(n.p,{children:"Depending on the secrets adapter you use with ToolJump, store your secrets accordingly. For example, with the env secrets adapter, secrets should be provided as environment variables so the ToolJump server can read them and pass them to your integrations."}),"\n",(0,s.jsxs)(n.p,{children:["To store the secrets in the env adapter (which stores them in the environment variables), you need to prefix them with ",(0,s.jsx)(n.code,{children:"INTEGRATION_"}),". So, the secret in this case should be defined as ",(0,s.jsx)(n.code,{children:"INTEGRATION_GITHUB_TOKEN=..."}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"declaring-required-secrets",children:"Declaring Required Secrets"}),"\n",(0,s.jsxs)(n.p,{children:["After storing the secrets accordingly, use the ",(0,s.jsx)(n.code,{children:"requiredSecrets"})," property in your metadata to define the secrets your integration needs:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"metadata: {\n    name: 'github-stats',\n    requiredSecrets: [\n        'GITHUB_TOKEN',\n    ],\n    // ... other metadata\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"accessing-secrets-in-your-integration",children:"Accessing Secrets in Your Integration"}),"\n",(0,s.jsxs)(n.p,{children:["Secrets are passed as the second parameter to your ",(0,s.jsx)(n.code,{children:"run"})," function:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"run: async function (context, secrets = {}) {\n    const token = secrets.GITHUB_TOKEN;\n    \n    const response = await fetch('https://api.github.com/user', {\n        headers: {\n            // use the token as part of the authorization header\n            'Authorization': `token ${token}`\n        }\n    });\n    \n    // Your integration logic here\n}\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Only the secrets declared in ",(0,s.jsx)(n.code,{children:"requiredSecrets"})," are injected into your integration. This scopes access appropriately and prevents other integrations from reading unrelated secrets."]})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["No need to check if the secret exists in the ",(0,s.jsx)(n.code,{children:"run"})," function, as it is automatically checked when running the integration. If a secret is not defined, but required by an integration, the integration will not run and a warning will be logged."]})}),"\n",(0,s.jsx)(n.h2,{id:"secret-security-best-practices",children:"Secret Security Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"1-never-log-secrets",children:"1. Never Log Secrets"}),"\n",(0,s.jsxs)(n.p,{children:["\u274c ",(0,s.jsx)(n.strong,{children:"Dangerous:"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"logger.info('API Key:', secrets.API_KEY);\nlogger.info('Token:', secrets.GITHUB_TOKEN);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Safe:"}),"\nThis just shows whether the secret is defined or not:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"logger.info('API Key configured:', !!secrets.API_KEY);\nlogger.info('GitHub token present:', !!secrets.GITHUB_TOKEN);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"secret-rotation",children:"Secret Rotation"}),"\n",(0,s.jsx)(n.p,{children:"For production use, implement secret rotation:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"run: async function (context, secrets = {}, dataFiles = []) {\n    const primaryToken = secrets.GITHUB_TOKEN_PRIMARY;\n    const backupToken = secrets.GITHUB_TOKEN_BACKUP;\n    \n    // Try primary token first, fallback to backup\n    let token = primaryToken;\n    if (!primaryToken && backupToken) {\n        token = backupToken;\n        logger.info('Using backup GitHub token');\n    }\n    \n    // Your integration logic here\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(n.p,{children:"Now that you understand secrets, you have all the core concepts:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/docs/writing-integrations/data",children:"Data"})})," - Provide configuration and reference data"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/docs/writing-integrations/debugging",children:"Debugging"})})," - Troubleshoot and validate behavior"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["See secrets in action with our ",(0,s.jsx)(n.a,{href:"/integrations/github-datadog-logs-alerts",children:"Datadog integration examples"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"You're ready to build powerful, secure integrations!"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);